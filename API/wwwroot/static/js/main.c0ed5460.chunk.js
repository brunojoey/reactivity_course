(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{311:function(e,t,n){},606:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return Wn}));var i=n(0),r=n(23),a=n.n(r),c=n(17),o=n(21),s=n(333),l=n(622),u=n(638),b=n(336),j=n(159),d=n(49),h=n(6),p=n(14),f=n.n(p),O=n(25),m=n(335),g=n(11),v=n(116),x=n(10),y=(n(144),n(28)),w=n(69),C=n.n(w);C.a.defaults.baseURL="/api",C.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),C.a.interceptors.response.use(void 0,(function(e){"Network Error"!==e.message||e.response||y.b.error("Network Error - Make Sure API is running.");var t=e.response,n=t.status,i=t.data,r=t.config,a=t.headers;throw 404===n&&Wn.push("/not-found"),401===n&&a["www-authenticate"].includes("The token expired")&&(window.localStorage.removeItem("jwt"),Wn.push("/"),y.b.info("Your session has expired. Please login again.")),400===n&&"get"===r.method&&i.errors.hasOwnProperty("id")&&Wn.push("/not-found"),500===n&&y.b.error("Server Error - Check the Terminal for More Information!"),e.response}));var k,S,P,A,z,T,R,I,F,M,L,D,E,N,H,G,U,q,V,B,Y,J,W,K,Q,X,Z,$,_,ee,te,ne,ie,re,ae,ce,oe,se,le,ue,be,je,de,he,pe,fe,Oe,me,ge,ve,xe,ye,we,Ce,ke,Se,Pe,Ae,ze,Te,Re,Ie,Fe,Me=function(e){return e?e.data:[]},Le=function(e){return C.a.get(e).then(Me)},De=function(e,t){return C.a.post(e,t).then(Me)},Ee=function(e,t){return C.a.put(e,t).then(Me)},Ne=function(e){return C.a.delete(e).then(Me)},He=function(e,t){var n=new FormData;return n.append("File",t),C.a.post(e,n,{headers:{"Content-type":"multipart/form-data"}}).then(Me)},Ge={list:function(e){return C.a.get("/activities",{params:e}).then(Me)},details:function(e){return Le("/activities/".concat(e))},create:function(e){return De("/activities",e)},update:function(e){return Ee("/activities/".concat(e.id),e)},delete:function(e){return Ne("/activities/".concat(e))},attend:function(e){return De("/activities/".concat(e,"/attend"),{})},unattend:function(e){return Ne("/activities/".concat(e,"/attend"))}},Ue={current:function(){return Le("/user")},login:function(e){return De("/user/login/",e)},register:function(e){return De("/user/register/",e)},fbLogin:function(e){return De("/user/facebook",{accessToken:e})},refreshToken:function(){return De("/user/refershToken",{})},verifyEmail:function(e,t){return De("/user/verifyEmail",{token:e,email:t})},resendVerifyEmailConfirm:function(e){return Le("/user/resendEmailVerification?email=".concat(e))}},qe={get:function(e){return Le("/profiles/".concat(e))},uploadPhoto:function(e){return He("/photos",e)},setMainPhoto:function(e){return De("/photos/".concat(e,"/setMain"),{})},deletePhoto:function(e){return Ne("/photos/".concat(e))},editProfile:function(e){return Ee("/profiles",e)},follow:function(e){return De("/profiles/".concat(e,"/follow"),{})},unfollow:function(e){return Ne("/profiles/".concat(e,"/follow"))},listFollowings:function(e,t){return Le("/profiles/".concat(e,"/follow?predicate=").concat(t))},listActivities:function(e,t){return Le("/profiles/".concat(e,"/activities?predicate=").concat(t))}},Ve=function(e,t){return e.date=new Date(e.date),e.isGoing=e.attendees.some((function(e){return e.username===t.username})),e.isHost=e.attendees.some((function(e){return e.username===t.username&&e.isHost})),e},Be=function(e){return{displayName:e.displayName,isHost:!1,username:e.username,image:e.image}},Ye=n(247),Je=(k=h.g.ref,S=function(){function e(t){var n=this;Object(d.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"activityRegistry",P,this),Object(g.a)(this,"activity",A,this),Object(g.a)(this,"loadingInitial",z,this),Object(g.a)(this,"submitting",T,this),Object(g.a)(this,"target",R,this),Object(g.a)(this,"loading",I,this),Object(g.a)(this,"hubConnection",F,this),Object(g.a)(this,"activityCount",M,this),Object(g.a)(this,"page",L,this),Object(g.a)(this,"predicate",D,this),Object(g.a)(this,"setPredicate",E,this),Object(g.a)(this,"setPage",N,this),Object(g.a)(this,"createHubConnection",H,this),Object(g.a)(this,"stopHubConnection",G,this),Object(g.a)(this,"addComment",U,this),Object(g.a)(this,"loadActivities",q,this),Object(g.a)(this,"loadActivity",V,this),Object(g.a)(this,"clearActivity",B,this),this.getActivity=function(e){return n.activityRegistry.get(e)},Object(g.a)(this,"createActivity",Y,this),Object(g.a)(this,"editActivity",J,this),Object(g.a)(this,"deleteActivity",W,this),Object(g.a)(this,"attendActivity",K,this),Object(g.a)(this,"cancelAttendance",Q,this),this.rootStore=t,Object(h.h)((function(){return n.predicate.keys()}),(function(){n.page=0,n.activityRegistry.clear(),n.loadActivities()}))}return Object(v.a)(e,[{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("limit",String(2)),e.append("offset","".concat(this.page?2*this.page:0)),this.predicate.forEach((function(t,n){"startDate"===n?e.append(n,t.toISOString()):e.append(n,t)})),e}},{key:"totalPages",get:function(){return Math.ceil(this.activityCount/2)}},{key:"activitiesByDate",get:function(){return this.groupActivitiesByDate(Array.from(this.activityRegistry.values()))}},{key:"groupActivitiesByDate",value:function(e){var t=e.sort((function(e,t){return e.date.getTime()-t.date.getTime()}));return Object.entries(t.reduce((function(e,t){var n=t.date.toISOString().split("T")[0];return e[n]=e[n]?[].concat(Object(m.a)(e[n]),[t]):[t],e}),{}))}}]),e}(),P=Object(x.a)(S.prototype,"activityRegistry",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),A=Object(x.a)(S.prototype,"activity",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=Object(x.a)(S.prototype,"loadingInitial",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=Object(x.a)(S.prototype,"submitting",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=Object(x.a)(S.prototype,"target",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=Object(x.a)(S.prototype,"loading",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=Object(x.a)(S.prototype,"hubConnection",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=Object(x.a)(S.prototype,"activityCount",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=Object(x.a)(S.prototype,"page",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=Object(x.a)(S.prototype,"predicate",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),E=Object(x.a)(S.prototype,"setPredicate",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.predicate.clear(),"all"!==t&&e.predicate.set(t,n)}}}),Object(x.a)(S.prototype,"axiosParams",[h.c],Object.getOwnPropertyDescriptor(S.prototype,"axiosParams"),S.prototype),Object(x.a)(S.prototype,"totalPages",[h.c],Object.getOwnPropertyDescriptor(S.prototype,"totalPages"),S.prototype),N=Object(x.a)(S.prototype,"setPage",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.page=t}}}),H=Object(x.a)(S.prototype,"createHubConnection",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection=(new Ye.a).withUrl("/chat",{accessTokenFactory:function(){return e.rootStore.commonStore.token}}).configureLogging(Ye.b.Information).build(),e.hubConnection.start().then((function(){return console.log("Hub Connection State",e.hubConnection.state)})).then((function(){"Connected"===e.hubConnection.state&&e.hubConnection.invoke("AddToGroup",t)})).catch((function(e){return console.log("Error establishing connection: ",e)})),e.hubConnection.on("ReceiveComment",(function(t){Object(h.i)((function(){e.activity.comments.push(t)}))})),e.hubConnection.on("Send",(function(e){y.b.info(e)}))}}}),G=Object(x.a)(S.prototype,"stopHubConnection",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.hubConnection.invoke("RemoveFromGroup",e.activity.id).then((function(){e.hubConnection.stop()})).then((function(){return console.log("Connection has stopped.")})).catch((function(e){return console.log("error",e)}))}}}),U=Object(x.a)(S.prototype,"addComment",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.activityId=e.activity.id,t.prev=1,t.next=4,e.hubConnection.invoke("SendComment",n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log("error",t.t0);case 9:case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Object(x.a)(S.prototype,"activitiesByDate",[h.c],Object.getOwnPropertyDescriptor(S.prototype,"activitiesByDate"),S.prototype),q=Object(x.a)(S.prototype,"loadActivities",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(f.a.mark((function t(){var n,i,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingInitial=!0,t.prev=1,t.next=4,Ge.list(e.axiosParams);case 4:n=t.sent,i=n.activities,r=n.activityCount,Object(h.i)((function(){i.forEach((function(t){Ve(t,e.rootStore.userStore.user),e.activityRegistry.set(t.id,t)})),e.activityCount=r,e.loadingInitial=!1})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),Object(h.i)((function(){e.loadingInitial=!1})),console.log("error",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))}}),V=Object(x.a)(S.prototype,"loadActivity",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){var i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.getActivity(n))){t.next=6;break}return e.activity=i,t.abrupt("return",Object(h.j)(i));case 6:return e.loadingInitial=!0,t.prev=7,t.next=10,Ge.details(n);case 10:return i=t.sent,Object(h.i)((function(){Ve(i,e.rootStore.userStore.user),e.activity=i,e.activityRegistry.set(i.id,i),e.loadingInitial=!1})),t.abrupt("return",i);case 15:t.prev=15,t.t0=t.catch(7),Object(h.i)((function(){e.loadingInitial=!1})),console.log("error",t.t0);case 19:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e){return t.apply(this,arguments)}}()}}),B=Object(x.a)(S.prototype,"clearActivity",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.activity=null}}}),Y=Object(x.a)(S.prototype,"createActivity",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){var i,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,t.next=4,Ge.create(n);case 4:(i=Be(e.rootStore.userStore.user)).isHost=!0,(r=[]).push(i),n.attendees=r,n.comments=[],n.isHost=!0,Object(h.i)((function(){e.activityRegistry.set(n.id,n),e.submitting=!1})),Wn.push("/activities/".concat(n.id)),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(1),Object(h.i)((function(){e.submitting=!1})),y.b.error("Problem Submitting Data"),console.log("error",t.t0.response);case 20:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()}}),J=Object(x.a)(S.prototype,"editActivity",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,t.prev=1,t.next=4,Ge.update(n);case 4:Object(h.i)((function(){e.activityRegistry.set(n.id,n),e.activity=n,e.submitting=!1})),Wn.push("/activities/".concat(n.id)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),Object(h.i)((function(){e.submitting=!1})),console.log("error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),W=Object(x.a)(S.prototype,"deleteActivity",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n,i){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitting=!0,e.target=n.currentTarget.name,t.prev=2,t.next=5,Ge.delete(i);case 5:Object(h.i)((function(){e.activityRegistry.delete(i),e.submitting=!1,e.target=""})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),Object(h.i)((function(){e.submitting=!1,e.target=""})),console.log("error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}()}}),K=Object(x.a)(S.prototype,"attendActivity",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Be(e.rootStore.userStore.user),e.loading=!0,t.prev=2,t.next=5,Ge.attend(e.activity.id);case 5:Object(h.i)((function(){e.activity&&(e.activity.attendees.push(n),e.activity.isGoing=!0,e.activityRegistry.set(e.activity.id,e.activity),e.loading=!1)})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),Object(h.i)((function(){e.loading=!1})),y.b.error("Problem Signing up to Activity");case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))}}),Q=Object(x.a)(S.prototype,"cancelAttendance",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Ge.unattend(e.activity.id);case 4:Object(h.i)((function(){e.activity&&(e.activity.attendees=e.activity.attendees.filter((function(t){return t.username!==e.rootStore.userStore.user.username})),e.activity.isGoing=!1,e.activityRegistry.set(e.activity.id,e.activity),e.loading=!1)})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(h.i)((function(){e.loading=!1})),y.b.error("Problem Cancelling Attendance");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))}}),S),We=(X=function(){function e(t){Object(d.a)(this,e),this.refreshTokenTimeout=void 0,this.rootStore=void 0,Object(g.a)(this,"user",Z,this),Object(g.a)(this,"loading",$,this),Object(g.a)(this,"login",_,this),Object(g.a)(this,"register",ee,this),Object(g.a)(this,"refreshToken",te,this),Object(g.a)(this,"getUser",ne,this),Object(g.a)(this,"logout",ie,this),Object(g.a)(this,"fbLogin",re,this),this.rootStore=t}return Object(v.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}},{key:"startRefreshTokenTimer",value:function(e){var t=JSON.parse(atob(e.token.split(".")[1])),n=new Date(1e3*t.exp).getTime()-Date.now()-6e4;this.refreshTokenTimeout=setTimeout(this.refreshToken,n)}},{key:"stopRefreshTokenTimer",value:function(){clearTimeout(this.refreshTokenTimeout)}}]),e}(),Z=Object(x.a)(X.prototype,"user",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=Object(x.a)(X.prototype,"loading",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(x.a)(X.prototype,"isLoggedIn",[h.c],Object.getOwnPropertyDescriptor(X.prototype,"isLoggedIn"),X.prototype),_=Object(x.a)(X.prototype,"login",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){var i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ue.login(n);case 3:i=t.sent,Object(h.i)((function(){e.user=i})),e.rootStore.commonStore.setToken(i.token),e.startRefreshTokenTimer(i),e.rootStore.modalStore.closeModal(),Wn.push("/activities"),t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}}),ee=Object(x.a)(X.prototype,"register",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ue.register(n);case 3:e.rootStore.modalStore.closeModal(),Wn.push("/user/registerSuccess?email=".concat(n.email)),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),te=Object(x.a)(X.prototype,"refreshToken",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopRefreshTokenTimer(),t.prev=1,t.next=4,Ue.refreshToken();case 4:n=t.sent,Object(h.i)((function(){e.user=n})),e.rootStore.commonStore.setToken(n.token),e.startRefreshTokenTimer(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("error",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))}}),ne=Object(x.a)(X.prototype,"getUser",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ue.current();case 3:n=t.sent,Object(h.i)((function(){e.user=n})),e.rootStore.commonStore.setToken(n.token),e.startRefreshTokenTimer(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("error",t.t0);case 12:case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))}}),ie=Object(x.a)(X.prototype,"logout",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.rootStore.commonStore.setToken(null),e.user=null,Wn.push("/")}}}),re=Object(x.a)(X.prototype,"fbLogin",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){var i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Ue.fbLogin(n.accessToken);case 4:i=t.sent,Object(h.i)((function(){e.user=i,e.rootStore.commonStore.setToken(i.token),e.startRefreshTokenTimer(i),e.rootStore.modalStore.closeModal(),e.loading=!1})),Wn.push("/activities"),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(1),Object(h.i)((function(){e.loading=!1})),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}),X),Ke=(ae=function e(t){var n=this;Object(d.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"token",ce,this),Object(g.a)(this,"appLoaded",oe,this),Object(g.a)(this,"setToken",se,this),Object(g.a)(this,"setAppLoaded",le,this),this.rootStore=t,Object(h.h)((function(){return n.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},ce=Object(x.a)(ae.prototype,"token",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("jwt")}}),oe=Object(x.a)(ae.prototype,"appLoaded",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),se=Object(x.a)(ae.prototype,"setToken",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.token=t}}}),le=Object(x.a)(ae.prototype,"setAppLoaded",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoaded=!0}}}),ae),Qe=(ue=h.g.shallow,be=function e(t){Object(d.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"modal",je,this),Object(g.a)(this,"openModal",de,this),Object(g.a)(this,"closeModal",he,this),this.rootStore=t},je=Object(x.a)(be.prototype,"modal",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{open:!1,body:null}}}),de=Object(x.a)(be.prototype,"openModal",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.modal.open=!0,e.modal.body=t}}}),he=Object(x.a)(be.prototype,"closeModal",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.modal.open=!1,e.modal.body=null}}}),be),Xe=n(27),Ze=(pe=function(){function e(t){var n=this;Object(d.a)(this,e),this.rootStore=void 0,Object(g.a)(this,"profile",fe,this),Object(g.a)(this,"loadingProfile",Oe,this),Object(g.a)(this,"uploadingPhoto",me,this),Object(g.a)(this,"loading",ge,this),Object(g.a)(this,"followings",ve,this),Object(g.a)(this,"activeTab",xe,this),Object(g.a)(this,"userActivities",ye,this),Object(g.a)(this,"loadingActivities",we,this),Object(g.a)(this,"setActiveTab",Ce,this),Object(g.a)(this,"loadUserActivities",ke,this),Object(g.a)(this,"loadProfile",Se,this),Object(g.a)(this,"editProfile",Pe,this),Object(g.a)(this,"uploadPhoto",Ae,this),Object(g.a)(this,"setMainPhoto",ze,this),Object(g.a)(this,"deletePhoto",Te,this),Object(g.a)(this,"follow",Re,this),Object(g.a)(this,"unfollow",Ie,this),Object(g.a)(this,"loadFollowings",Fe,this),this.rootStore=t,Object(h.h)((function(){return n.activeTab}),(function(e){if(3===e||4===e){var t=3===e?"followers":"following";n.loadFollowings(t)}else n.followings=[]}))}return Object(v.a)(e,[{key:"isCurrentUser",get:function(){return!(!this.rootStore.userStore.user||!this.profile)&&this.rootStore.userStore.user.username===this.profile.username}}]),e}(),fe=Object(x.a)(pe.prototype,"profile",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=Object(x.a)(pe.prototype,"loadingProfile",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),me=Object(x.a)(pe.prototype,"uploadingPhoto",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=Object(x.a)(pe.prototype,"loading",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=Object(x.a)(pe.prototype,"followings",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xe=Object(x.a)(pe.prototype,"activeTab",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ye=Object(x.a)(pe.prototype,"userActivities",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=Object(x.a)(pe.prototype,"loadingActivities",[h.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(x.a)(pe.prototype,"isCurrentUser",[h.c],Object.getOwnPropertyDescriptor(pe.prototype,"isCurrentUser"),pe.prototype),Ce=Object(x.a)(pe.prototype,"setActiveTab",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTab=t}}}),ke=Object(x.a)(pe.prototype,"loadUserActivities",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n,i){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingActivities=!0,t.prev=1,t.next=4,qe.listActivities(n,i);case 4:r=t.sent,Object(h.i)((function(){e.userActivities=r,e.loadingActivities=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),y.b.error("Problem Loading Activities"),Object(h.i)((function(){e.loadingActivities=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()}}),Se=Object(x.a)(pe.prototype,"loadProfile",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){var i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.get(n);case 3:i=t.sent,Object(h.i)((function(){e.profile=i,e.loadingProfile=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Object(h.i)((function(){e.loadingProfile=!1})),console.log("error",t.t0);case 11:case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Pe=Object(x.a)(pe.prototype,"editProfile",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.editProfile(n);case 3:Object(h.i)((function(){n.displayName!==e.rootStore.userStore.user.displayName&&(e.rootStore.userStore.user.displayName=n.displayName),e.profile=Object(Xe.a)(Object(Xe.a)({},e.profile),n)})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("error",t.t0),y.b.error("Problem updating Profile");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Ae=Object(x.a)(pe.prototype,"uploadPhoto",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){var i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.uploadingPhoto=!0,t.prev=1,t.next=4,qe.uploadPhoto(n);case 4:i=t.sent,Object(h.i)((function(){e.profile&&(e.profile.photos.push(i),i.isMain&&e.rootStore.userStore.user&&(e.rootStore.userStore.user.image=i.url,e.profile.image=i.url)),e.uploadingPhoto=!1})),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("error",t.t0),y.b.error("Problem uploading photo"),Object(h.i)((function(){e.uploadingPhoto=!1}));case 13:case 14:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),ze=Object(x.a)(pe.prototype,"setMainPhoto",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.setMainPhoto(n.id);case 4:Object(h.i)((function(){e.rootStore.userStore.user.image=n.url,e.profile.photos.find((function(e){return e.isMain})).isMain=!1,e.profile.photos.find((function(e){return e.id===n.id})).isMain=!0,e.profile.image=n.url,e.loading=!1})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("error",t.t0),y.b.error("Problem setting main photo"),Object(h.i)((function(){e.loading=!1}));case 12:case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Te=Object(x.a)(pe.prototype,"deletePhoto",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.deletePhoto(n.id);case 4:Object(h.i)((function(){e.profile.photos=e.profile.photos.filter((function(e){return e.id!==n.id})),e.loading=!1})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("error",t.t0),y.b.error("Problem deleting this photo"),Object(h.i)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Re=Object(x.a)(pe.prototype,"follow",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.follow(n);case 4:Object(h.i)((function(){e.profile.following=!0,e.profile.followersCount++,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),y.b.error("Problem following user"),Object(h.i)((function(){e.loading=!1}));case 11:case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Ie=Object(x.a)(pe.prototype,"unfollow",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.unfollow(n);case 4:Object(h.i)((function(){e.profile.following=!1,e.profile.followersCount--,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),y.b.error("Problem unfollowing user"),Object(h.i)((function(){e.loading=!1}));case 11:case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Fe=Object(x.a)(pe.prototype,"loadFollowings",[h.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(f.a.mark((function t(n){var i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.listFollowings(e.profile.username,n);case 4:i=t.sent,Object(h.i)((function(){e.followings=i,e.loading=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),y.b.error("Problem loading followings"),Object(h.i)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),pe);Object(h.d)({enforceActions:"always"});var $e=Object(i.createContext)(new function e(){Object(d.a)(this,e),this.activityStore=void 0,this.userStore=void 0,this.commonStore=void 0,this.modalStore=void 0,this.profileStore=void 0,this.activityStore=new Je(this),this.userStore=new We(this),this.commonStore=new Ke(this),this.modalStore=new Qe(this),this.profileStore=new Ze(this)}),_e=n(1),et=Object(c.a)((function(){var e=Object(i.useContext)($e).userStore,t=e.user,n=e.logout;return Object(_e.jsx)(s.a,{fixed:"top",inverted:!0,children:Object(_e.jsxs)(l.a,{children:[Object(_e.jsxs)(s.a.Item,{header:!0,as:o.b,exact:!0,to:"/",children:[Object(_e.jsx)("img",{src:"/assets/logo.png",alt:"logo",style:{marginRight:"1rem"}}),"Reactivities"]}),Object(_e.jsx)(s.a.Item,{name:"activities",as:o.b,to:"/activities"}),Object(_e.jsx)(s.a.Item,{children:Object(_e.jsx)(u.a,{as:o.b,to:"/createActivity",positive:!0,content:"Create Activity"})}),t&&Object(_e.jsxs)(s.a.Item,{position:"right",children:[Object(_e.jsx)(b.a,{avatar:!0,spaced:"right",src:t.image||"/assets/user.png"}),Object(_e.jsx)(j.a,{pointing:"top left",text:t.displayName,children:Object(_e.jsxs)(j.a.Menu,{children:[Object(_e.jsx)(j.a.Item,{as:o.a,to:"/profile/".concat(t.username),text:"My Profile",icon:"user"}),Object(_e.jsx)(j.a.Item,{onClick:n,text:"Logout",icon:"power"})]})})]})]})})})),tt=n(248),nt=n(642),it=n(117),rt=n(72),at=n(22),ct=n(628),ot=n(624),st=n(205),lt=function(e){var t=e.input,n=e.width,i=e.type,r=e.placeholder,a=e.meta,c=a.touched,o=a.error;return Object(_e.jsxs)(ct.a.Field,{error:c&&!!o,type:i,width:n,children:[Object(_e.jsx)("input",Object(Xe.a)(Object(Xe.a)({},t),{},{placeholder:r})),c&&o&&Object(_e.jsx)(st.a,{basic:!0,color:"red",children:o})]})},ut=n(29),bt=n(635),jt=function(e){var t=e.error,n=e.text;return Object(_e.jsxs)(bt.a,{error:!0,children:[Object(_e.jsx)(bt.a.Header,{children:t.statusText}),t.data&&Object.keys(t.data.errors).length>0&&Object(_e.jsx)(bt.a.List,{children:Object.values(t.data.errors).flat().map((function(e,t){return Object(_e.jsx)(bt.a.Item,{children:e},t)}))}),n&&Object(_e.jsx)(bt.a.Content,{content:n})]})},dt=n(327),ht=n.n(dt),pt=n(92),ft=Object(c.a)((function(e){var t=e.fbCallback,n=e.loading;return Object(_e.jsx)("div",{children:Object(_e.jsx)(ht.a,{appId:"754926351797383",fields:"name,email,picture",callback:t,render:function(e){return Object(_e.jsxs)(u.a,{loading:n,onClick:e.onClick,type:"button",fluid:!0,color:"facebook",children:[Object(_e.jsx)(pt.a,{name:"facebook"}),"Login with Facebook"]})}})})})),Ot=Object(ut.combineValidators)({email:Object(ut.isRequired)("Email"),password:Object(ut.isRequired)("Password")}),mt=Object(c.a)((function(){var e=Object(i.useContext)($e).userStore,t=e.login,n=e.fbLogin,r=e.loading;return Object(_e.jsx)(at.b,{onSubmit:function(e){return t(e).catch((function(e){return Object(it.a)({},rt.a,e)}))},validate:Ot,render:function(e){var t=e.handleSubmit,i=e.submitting,a=e.submitError,c=e.invalid,o=e.pristine,s=e.dirtySinceLastSubmit;return Object(_e.jsxs)(ct.a,{onSubmit:t,error:!0,autoComplete:"off",children:[Object(_e.jsx)(nt.a,{as:"h2",content:"Login to Reactivities",color:"teal",textAlign:"center"}),Object(_e.jsx)(at.a,{name:"email",component:lt,placeholder:"Email"}),Object(_e.jsx)(at.a,{name:"password",component:lt,placeholder:"Password",type:"password"}),a&&!s&&Object(_e.jsx)(jt,{error:a,text:"Invalid Email or Password"}),Object(_e.jsx)(u.a,{disabled:c&&!s||o,loading:i,color:"teal",content:"Login",fluid:!0}),Object(_e.jsx)(ot.a,{horizontal:!0,children:" Or "}),Object(_e.jsx)(ft,{loading:r,fbCallback:n})]})}})})),gt=Object(ut.combineValidators)({username:Object(ut.isRequired)("username"),displayName:Object(ut.isRequired)("display name"),email:Object(ut.isRequired)("Email"),password:Object(ut.isRequired)("Password")}),vt=function(){var e=Object(i.useContext)($e).userStore.register;return Object(_e.jsx)(at.b,{onSubmit:function(t){return e(t).catch((function(e){return Object(it.a)({},rt.a,e)}))},validate:gt,render:function(e){var t=e.handleSubmit,n=e.submitting,i=e.submitError,r=e.invalid,a=e.pristine,c=e.dirtySinceLastSubmit;return Object(_e.jsxs)(ct.a,{onSubmit:t,error:!0,children:[Object(_e.jsx)(nt.a,{as:"h2",content:"Sign up to Reactivities",color:"teal",textAlign:"center"}),Object(_e.jsx)(at.a,{name:"username",component:lt,placeholder:"Username"}),Object(_e.jsx)(at.a,{name:"displayName",component:lt,placeholder:"Display Name"}),Object(_e.jsx)(at.a,{name:"email",component:lt,placeholder:"Email"}),Object(_e.jsx)(at.a,{name:"password",component:lt,placeholder:"Password",type:"password"}),i&&!c&&Object(_e.jsx)(jt,{error:i}),Object(_e.jsx)(u.a,{disabled:r&&!c||a,loading:n,color:"teal",content:"Register",fluid:!0})]})}})},xt=function(){var e=window.localStorage.getItem("jwt"),t=Object(i.useContext)($e),n=t.userStore,r=n.isLoggedIn,a=n.user,c=t.modalStore.openModal;return Object(_e.jsx)(tt.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(_e.jsxs)(l.a,{text:!0,children:[Object(_e.jsxs)(nt.a,{as:"h1",inverted:!0,children:[Object(_e.jsx)(b.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Reactivities"]}),r&&a&&e?Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsx)(nt.a,{as:"h2",inverted:!0,content:"Welcome back ".concat(a.displayName)}),Object(_e.jsx)(u.a,{as:o.a,to:"/activities",size:"huge",inverted:!0,children:"Go to Activities"})]}):Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsx)(nt.a,{as:"h2",inverted:!0,content:"Welcome to Reactivities"}),Object(_e.jsx)(u.a,{onClick:function(){return c(Object(_e.jsx)(mt,{}))},size:"huge",inverted:!0,children:"Login"}),Object(_e.jsx)(u.a,{onClick:function(){return c(Object(_e.jsx)(vt,{}))},size:"huge",inverted:!0,children:"Register"})]})]})})},yt=n(337),wt=n(631),Ct=n(639),kt=n(644),St=Object(c.a)((function(e){var t=e.profile,n=e.isCurrentUser,i=e.loading,r=e.follow,a=e.unfollow;return Object(_e.jsx)(tt.a,{children:Object(_e.jsxs)(yt.a,{children:[Object(_e.jsx)(yt.a.Column,{width:12,children:Object(_e.jsx)(wt.a.Group,{children:Object(_e.jsxs)(wt.a,{children:[Object(_e.jsx)(wt.a.Image,{avatar:!0,size:"small",src:t.image||"/assets/user.png"}),Object(_e.jsx)(wt.a.Content,{verticalAlign:"middle",children:Object(_e.jsx)(nt.a,{as:"h1",children:t.displayName})})]})})}),Object(_e.jsxs)(yt.a.Column,{width:4,children:[Object(_e.jsxs)(Ct.a.Group,{widths:2,children:[Object(_e.jsx)(Ct.a,{label:"Followers",value:t.followersCount}),Object(_e.jsx)(Ct.a,{label:"Following",value:t.followingCount})]}),Object(_e.jsx)(ot.a,{}),!n&&Object(_e.jsxs)(kt.a,{animated:"move",children:[Object(_e.jsx)(kt.a.Content,{visible:!0,style:{width:"100%"},children:Object(_e.jsx)(u.a,{fluid:!0,color:"teal",content:t.following?"Following":"Not Following"})}),Object(_e.jsx)(kt.a.Content,{hidden:!0,children:Object(_e.jsx)(u.a,{loading:i,fluid:!0,basic:!0,color:t.following?"red":"green",content:t.following?"Unfollow":"Follow",onClick:t.following?function(){return a(t.username)}:function(){return r(t.username)}})})]})]})]})})})),Pt=n(645),At=n(42),zt=n(634),Tt=n(334),Rt={border:"dashed 3px",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},It={borderColor:"green"},Ft=function(e){var t=e.setFiles,n=Object(i.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),r=Object(Tt.a)({onDrop:n}),a=r.getRootProps,c=r.getInputProps,o=r.isDragActive;return Object(_e.jsxs)("div",Object(Xe.a)(Object(Xe.a)({},a()),{},{style:o?Object(Xe.a)(Object(Xe.a)({},Rt),It):Rt,children:[Object(_e.jsx)("input",Object(Xe.a)({},c())),Object(_e.jsx)(pt.a,{name:"upload",size:"huge"}),Object(_e.jsx)(nt.a,{content:"Drop Image here"})]}))},Mt=n(329),Lt=n.n(Mt),Dt=(n(512),function(e){var t=e.setImage,n=e.imagePreview,r=Object(i.useRef)(null);return Object(_e.jsx)(Lt.a,{ref:r,src:n,style:{height:200,width:"100%"},aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){r.current&&"undefined"==typeof r.current.getCroppedCanvas()||r&&r.current&&r.current.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")}})}),Et=Object(c.a)((function(e){var t=e.loading,n=e.uploadPhoto,r=Object(i.useState)([]),a=Object(At.a)(r,2),c=a[0],o=a[1],s=Object(i.useState)(null),l=Object(At.a)(s,2),b=l[0],j=l[1];return Object(i.useEffect)((function(){return function(){c.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}})),Object(_e.jsx)(i.Fragment,{children:Object(_e.jsxs)(yt.a,{children:[Object(_e.jsxs)(yt.a.Column,{width:4,children:[Object(_e.jsx)(nt.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),Object(_e.jsx)(Ft,{setFiles:o})]}),Object(_e.jsx)(yt.a.Column,{width:1}),Object(_e.jsxs)(yt.a.Column,{width:4,children:[Object(_e.jsx)(nt.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),c.length>0&&Object(_e.jsx)(Dt,{setImage:j,imagePreview:c[0].preview})]}),Object(_e.jsx)(yt.a.Column,{width:1}),Object(_e.jsxs)(yt.a.Column,{width:4,children:[Object(_e.jsx)(nt.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),c.length>0&&Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsx)("div",{className:"img-preview",style:{minHeight:"200px",overflow:"hidden"}}),Object(_e.jsxs)(u.a.Group,{widths:2,children:[Object(_e.jsx)(u.a,{positive:!0,icon:"check",loading:t,onClick:function(){return n(b)}}),Object(_e.jsx)(u.a,{icon:"close",disabled:t,onClick:function(){return o([])}})]})]})]})]})})})),Nt=Object(c.a)((function(){var e=Object(i.useContext)($e).profileStore,t=e.profile,n=e.isCurrentUser,r=e.uploadPhoto,a=e.uploadingPhoto,c=e.setMainPhoto,o=e.deletePhoto,s=e.loading,l=Object(i.useState)(!0),j=Object(At.a)(l,2),d=j[0],h=j[1],p=Object(i.useState)(void 0),f=Object(At.a)(p,2),O=f[0],m=f[1],g=Object(i.useState)(void 0),v=Object(At.a)(g,2),x=v[0],y=v[1];return Object(_e.jsx)(Pt.a.Pane,{children:Object(_e.jsxs)(yt.a,{children:[Object(_e.jsxs)(yt.a.Column,{width:16,style:{paddingBottom:0},children:[Object(_e.jsx)(nt.a,{floated:"left",icon:"image",content:"Photos"}),n&&Object(_e.jsx)(u.a,{floated:"right",basic:!0,content:d?"Cancel":"Add Photo",onClick:function(){return h(!d)}})]}),Object(_e.jsx)(yt.a.Column,{width:16,children:d?Object(_e.jsx)(Et,{uploadPhoto:function(e){r(e).then((function(){return h(!1)}))},loading:a}):Object(_e.jsx)(zt.a.Group,{itemsPerRow:5,children:t&&t.photos.map((function(e){return Object(_e.jsxs)(zt.a,{children:[Object(_e.jsx)(b.a,{src:e.url}),n&&Object(_e.jsxs)(u.a.Group,{fluid:!0,widths:2,children:[Object(_e.jsx)(u.a,{name:e.id,onClick:function(t){c(e),m(t.currentTarget.name)},disabled:e.isMain,loading:s&&O===e.id,basic:!0,positive:!0,content:"Main"}),Object(_e.jsx)(u.a,{basic:!0,negative:!0,icon:"trash",name:e.id,disabled:e.isMain,onClick:function(t){o(e),y(t.currentTarget.name)},loading:s&&x===e.id})]})]},e.id)}))})})]})})})),Ht=function(e){var t=e.input,n=e.width,i=e.rows,r=e.placeholder,a=e.meta,c=a.touched,o=a.error;return Object(_e.jsxs)(ct.a.Field,{error:c&&!!o,width:n,children:[Object(_e.jsx)("textarea",Object(Xe.a)(Object(Xe.a)({rows:i},t),{},{placeholder:r})),c&&o&&Object(_e.jsx)(st.a,{basic:!0,color:"red",children:o})]})},Gt=Object(ut.combineValidators)({displayName:Object(ut.isRequired)("displayName")}),Ut=Object(c.a)((function(e){var t=e.editProfile,n=e.profile;return Object(_e.jsx)(at.b,{onSubmit:t,validate:Gt,initialValues:n,render:function(e){var t=e.handleSubmit,i=e.invalid,r=e.pristine,a=e.submitting;return Object(_e.jsxs)(ct.a,{onSubmit:t,error:!0,children:[Object(_e.jsx)(at.a,{name:"displayName",component:lt,placeholder:"Display Name",value:n.displayName}),Object(_e.jsx)(at.a,{name:"bio",component:Ht,rows:3,placeholder:"Biography",value:n.bio}),Object(_e.jsx)(u.a,{loading:a,floated:"right",disabled:i||r,positive:!0,content:"Update Profile"})]})}})})),qt=function(){var e=Object(i.useContext)($e).profileStore,t=e.editProfile,n=e.profile,r=e.isCurrentUser,a=Object(i.useState)(!1),c=Object(At.a)(a,2),o=c[0],s=c[1];return Object(_e.jsx)(Pt.a.Pane,{children:Object(_e.jsxs)(yt.a,{children:[Object(_e.jsxs)(yt.a.Column,{width:16,children:[Object(_e.jsx)(nt.a,{floated:"left",icon:"user",content:"About ".concat(n.username)}),r&&Object(_e.jsx)(u.a,{floated:"right",basic:!0,content:o?"Cancel":"Edit Profile",onClick:function(){return s(!o)}})]}),Object(_e.jsx)(yt.a.Column,{width:16,children:o?Object(_e.jsx)(Ut,{editProfile:t,profile:n}):Object(_e.jsx)("span",{children:n.bio})})]})})},Vt=function(e){var t=e.profile;return Object(_e.jsxs)(zt.a,{as:o.a,to:"/profile/".concat(t.username),children:[Object(_e.jsx)(b.a,{src:t.image||"/assets/user.png"}),Object(_e.jsx)(zt.a.Content,{children:Object(_e.jsx)(zt.a.Header,{children:t.displayName})}),Object(_e.jsx)(zt.a.Content,{extra:!0,children:Object(_e.jsxs)("div",{children:[Object(_e.jsx)(pt.a,{name:"user"}),t.followersCount," Followers"]})})]})},Bt=function(){var e=Object(i.useContext)($e).profileStore,t=e.profile,n=e.followings,r=e.loading,a=e.activeTab;return Object(_e.jsx)(Pt.a.Pane,{loading:r,children:Object(_e.jsxs)(yt.a,{children:[Object(_e.jsx)(yt.a.Column,{width:16,children:Object(_e.jsx)(nt.a,{floated:"left",icon:"user",content:3===a?"People Following ".concat(t.displayName):"People ".concat(t.displayName," is Following")})}),Object(_e.jsx)(yt.a.Column,{width:16,children:Object(_e.jsx)(zt.a.Group,{itemsPerRow:5,children:n.map((function(e){return Object(_e.jsx)(Vt,{profile:e},e.username)}))})})]})})},Yt=n(627),Jt=[{menuItem:"Future Events",pane:{key:"futureEvents"}},{menuItem:"Past Events",pane:{key:"pastEvents"}},{menuItem:"Hosting",pane:{key:"hosted"}}],Wt=Object(c.a)((function(){var e=Object(i.useContext)($e).profileStore,t=e.loadUserActivities,n=e.profile,r=e.loadingActivities,a=e.userActivities;Object(i.useEffect)((function(){t(n.username)}),[t,n]);return Object(_e.jsx)(Pt.a.Pane,{loading:r,children:Object(_e.jsxs)(yt.a,{children:[Object(_e.jsx)(yt.a.Column,{width:16,children:Object(_e.jsx)(nt.a,{floated:"left",icon:"calendar",content:"Activities"})}),Object(_e.jsxs)(yt.a.Column,{width:16,children:[Object(_e.jsx)(Pt.a,{panes:Jt,menu:{secondary:!0,pointing:!0},onTabChange:function(e,i){return function(e,i){var r;switch(i.activeIndex){case 1:r="past";break;case 2:r="hosting";break;default:r="future"}t(n.username,r)}(0,i)}}),Object(_e.jsx)("br",{}),Object(_e.jsx)(zt.a.Group,{itemsPerRow:4,children:a.map((function(e){return Object(_e.jsxs)(zt.a,{as:o.a,to:"/activities/".concat(e.id),children:[Object(_e.jsx)(b.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),Object(_e.jsxs)(zt.a.Content,{children:[Object(_e.jsx)(zt.a.Header,{textAlign:"center",children:e.title}),Object(_e.jsxs)(zt.a.Meta,{textAlign:"center",children:[Object(_e.jsx)("div",{children:Object(Yt.a)(new Date(e.date),"do LLL")}),Object(_e.jsx)("div",{children:Object(Yt.a)(new Date(e.date),"h:mm a")})]})]})]},e.id)}))})]})]})})})),Kt=[{menuItem:"About",render:function(){return Object(_e.jsx)(qt,{})}},{menuItem:"Photos",render:function(){return Object(_e.jsx)(Nt,{})}},{menuItem:"Activities",render:function(){return Object(_e.jsx)(Wt,{})}},{menuItem:"Followers",render:function(){return Object(_e.jsx)(Bt,{})}},{menuItem:"Following",render:function(){return Object(_e.jsx)(Bt,{})}}],Qt=function(e){var t=e.setActiveTab;return Object(_e.jsx)(Pt.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:Kt,onTabChange:function(e,n){return t(n.activeIndex)}})},Xt=n(640),Zt=n(625),$t=function(e){var t=e.inverted,n=void 0===t||t,i=e.content;return Object(_e.jsx)(Xt.a,{active:!0,inverted:n,children:Object(_e.jsx)(Zt.a,{content:i})})},_t=Object(c.a)((function(e){var t=e.match,n=Object(i.useContext)($e).profileStore,r=n.loadingProfile,a=n.profile,c=n.loadProfile,o=n.follow,s=n.unfollow,l=n.isCurrentUser,u=n.loading,b=n.setActiveTab;return Object(i.useEffect)((function(){c(t.params.username)}),[c,t]),r?Object(_e.jsx)($t,{content:"Loading Profile"}):Object(_e.jsx)("div",{children:Object(_e.jsx)(yt.a,{children:Object(_e.jsxs)(yt.a.Column,{width:16,children:[Object(_e.jsx)(St,{profile:a,isCurrentUser:l,loading:u,follow:o,unfollow:s}),Object(_e.jsx)(Qt,{setActiveTab:b})]})})})})),en=n(632),tn=n(626),nn={borderColor:"orange",borderWidth:2},rn=function(e){var t=e.attendees;return Object(_e.jsx)(en.a,{horizontal:!0,children:t.map((function(e){return Object(_e.jsx)(en.a.Item,{children:Object(_e.jsx)(tn.a,{header:e.displayName,trigger:Object(_e.jsx)(b.a,{size:"mini",circular:!0,src:e.image||"/assets/user.png",bordered:!0,style:e.following?nn:null})})},e.username)}))})},an=function(e){var t=e.activity,n=t.attendees.filter((function(e){return e.isHost}))[0];return Object(_e.jsxs)(tt.a.Group,{children:[Object(_e.jsx)(tt.a,{children:Object(_e.jsx)(wt.a.Group,{children:Object(_e.jsxs)(wt.a,{children:[Object(_e.jsx)(wt.a.Image,{size:"tiny",circular:!0,src:n.image||"/assets/user.png",style:{marginBottom:3}}),Object(_e.jsxs)(wt.a.Content,{children:[Object(_e.jsx)(wt.a.Header,{as:o.a,to:"/activities/".concat(t.id),children:t.title}),Object(_e.jsxs)(wt.a.Description,{children:["Hosted by ",Object(_e.jsxs)(o.a,{to:"/profile/".concat(n.username),children:[" ",n.displayName]})]}),t.isHost&&Object(_e.jsx)(wt.a.Description,{children:Object(_e.jsx)(st.a,{basic:!0,color:"orange",content:"You are hosting this activity"})}),t.isGoing&&!t.isHost&&Object(_e.jsx)(wt.a.Description,{children:Object(_e.jsx)(st.a,{basic:!0,color:"green",content:"You are going to this activity"})})]})]})})}),Object(_e.jsxs)(tt.a,{children:[Object(_e.jsx)(pt.a,{name:"clock"})," ",Object(Yt.a)(t.date,"h:mm a"),Object(_e.jsx)(pt.a,{name:"marker"})," ",t.venue,", ",t.city]}),Object(_e.jsx)(tt.a,{secondary:!0,children:Object(_e.jsx)(rn,{attendees:t.attendees})}),Object(_e.jsxs)(tt.a,{clearing:!0,children:[Object(_e.jsx)("span",{children:t.description}),Object(_e.jsx)(u.a,{as:o.a,to:"/activities/".concat(t.id),floated:"right",content:"View",color:"blue"})]})]})},cn=Object(c.a)((function(){var e=Object(i.useContext)($e).activityStore.activitiesByDate;return Object(_e.jsx)(i.Fragment,{children:e.map((function(e){var t=Object(At.a)(e,2),n=t[0],r=t[1];return Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsx)(st.a,{size:"large",color:"blue",children:Object(Yt.a)(Date.parse(n),"eeee do MMMM, yyyy")}),Object(_e.jsx)(wt.a.Group,{divided:!0,children:r.map((function(e){return Object(_e.jsx)(an,{activity:e},e.id)}))})]},n)}))})})),on=n(331),sn=n.n(on),ln=n(202),un=Object(c.a)((function(){var e=Object(i.useContext)($e).activityStore,t=e.predicate,n=e.setPredicate;return Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsxs)(s.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50},children:[Object(_e.jsx)(nt.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),Object(_e.jsx)(s.a.Item,{active:0===t.size,onClick:function(){return n("all","true")},color:"blue",name:"all",content:"All Activities"}),Object(_e.jsx)(s.a.Item,{active:t.has("isGoing"),onClick:function(){return n("isGoing","true")},color:"blue",name:"username",content:"I'm Going"}),Object(_e.jsx)(s.a.Item,{active:t.has("isHost"),onClick:function(){return n("isHost","true")},color:"blue",name:"host",content:"I'm Hosting"})]}),Object(_e.jsx)(nt.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),Object(_e.jsx)(ln.Calendar,{onChange:function(e){return n("startDate",e)},value:t.get("startDate")||new Date})]})})),bn=n(636),jn=function(){return Object(_e.jsx)(i.Fragment,{children:Object(_e.jsx)(bn.a,{fluid:!0,style:{marginTop:50},children:Object(_e.jsxs)(tt.a.Group,{children:[Object(_e.jsx)(tt.a,{style:{minHeight:110},children:Object(_e.jsxs)(bn.a,{children:[Object(_e.jsxs)(bn.a.Header,{image:!0,children:[Object(_e.jsx)(bn.a.Line,{}),Object(_e.jsx)(bn.a.Line,{})]}),Object(_e.jsx)(bn.a.Paragraph,{children:Object(_e.jsx)(bn.a.Line,{})})]})}),Object(_e.jsx)(tt.a,{children:Object(_e.jsxs)(bn.a,{children:[Object(_e.jsx)(bn.a.Line,{}),Object(_e.jsx)(bn.a.Line,{})]})}),Object(_e.jsx)(tt.a,{secondary:!0,style:{minHeight:70}}),Object(_e.jsx)(tt.a,{clearing:!0,children:Object(_e.jsx)(u.a,{disabled:!0,color:"blue",floated:"right",content:"View"})})]})})})},dn=Object(c.a)((function(){var e=Object(i.useState)(!1),t=Object(At.a)(e,2),n=t[0],r=t[1],a=Object(i.useContext)($e).activityStore,c=a.loadActivities,o=a.loadingInitial,s=a.setPage,l=a.page,u=a.totalPages;return Object(i.useEffect)((function(){c()}),[c]),Object(_e.jsxs)(yt.a,{children:[Object(_e.jsx)(yt.a.Column,{width:10,children:o&&0===l?Object(_e.jsx)(jn,{}):Object(_e.jsx)(sn.a,{pageStart:0,loadMore:function(){r(!0),s(l+1),c().then((function(){return r(!1)}))},hasMore:!n&&l+1<u,initialLoad:!1,children:Object(_e.jsx)(cn,{})})}),Object(_e.jsx)(yt.a.Column,{width:6,children:Object(_e.jsx)(un,{})}),Object(_e.jsx)(yt.a.Column,{width:10,children:Object(_e.jsx)(Zt.a,{active:n})})]})})),hn=n(129),pn=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],fn=function e(t){Object(d.a)(this,e),this.id=void 0,this.title="",this.category="",this.description="",this.date=void 0,this.time=void 0,this.city="",this.venue="",t&&t.date&&(t.time=t.date),Object.assign(this,t)},On=n(623),mn=function(e){var t=e.input,n=e.width,i=e.options,r=e.placeholder,a=e.meta,c=a.touched,o=a.error;return Object(_e.jsxs)(ct.a.Field,{error:c&&!!o,width:n,children:[Object(_e.jsx)(On.a,{value:t.value,onChange:function(e,n){return t.onChange(n.value)},placeholder:r,options:i}),c&&o&&Object(_e.jsx)(st.a,{basic:!0,color:"red",children:o})]})},gn=function(e){e.id;var t=e.input,n=e.width,i=e.placeholder,r=e.date,a=void 0!==r&&r,c=e.time,o=void 0!==c&&c,s=e.meta,l=s.touched,u=s.error,b=Object(hn.a)(e,["id","input","width","placeholder","date","time","meta"]);return Object(_e.jsxs)(ct.a.Field,{error:l&&!!u,width:n,children:[Object(_e.jsx)(ln.DateTimePicker,Object(Xe.a)({placeholder:i,value:t.value||null,onChange:t.onChange,onBlur:t.onBlur,onKeyDown:function(e){return e.preventDefault()},date:a,time:o},b)),l&&u&&Object(_e.jsx)(st.a,{basic:!0,color:"red",children:u})]})},vn=n(637),xn=Object(ut.combineValidators)({title:Object(ut.isRequired)({message:"Title is Required"}),category:Object(ut.isRequired)({message:"Category is Required"}),description:Object(ut.composeValidators)(Object(ut.isRequired)({message:"Description is Required"}),Object(ut.hasLengthGreaterThan)(4)({message:"Description Needs to be at Least Five Characters"}))(),city:Object(ut.isRequired)({message:"City is Required"}),venue:Object(ut.isRequired)({message:"Venue is Required"}),date:Object(ut.isRequired)({message:"Date is Required"}),time:Object(ut.isRequired)({message:"Time is Required"})}),yn=Object(c.a)((function(e){var t=e.match,n=e.history,r=Object(i.useContext)($e).activityStore,a=r.createActivity,c=r.editActivity,o=r.submitting,s=r.loadActivity,l=Object(i.useState)(new fn),b=Object(At.a)(l,2),j=b[0],d=b[1],h=Object(i.useState)(!1),p=Object(At.a)(h,2),f=p[0],O=p[1];Object(i.useEffect)((function(){t.params.id&&(O(!0),s(t.params.id).then((function(e){return d(new fn(e))})).finally((function(){return O(!1)})))}),[s,t.params.id]);return Object(_e.jsx)(yt.a,{children:Object(_e.jsx)(yt.a.Column,{width:10,children:Object(_e.jsx)(tt.a,{clearing:!0,children:Object(_e.jsx)(at.b,{validate:xn,initialValues:j,onSubmit:function(e){var t=function(e,t){var n=e.toISOString().split("T")[0],i=t.toISOString().split("T")[1];return new Date(n+" "+i)}(e.date,e.time),n=(e.date,e.time,Object(hn.a)(e,["date","time"]));if(n.date=t,n.id)c(n);else{var i=Object(Xe.a)(Object(Xe.a)({},n),{},{id:Object(vn.a)()});a(i)}},render:function(e){var t=e.handleSubmit,i=e.invalid,r=e.pristine;return Object(_e.jsxs)(ct.a,{onSubmit:t,loading:f,children:[Object(_e.jsx)(at.a,{name:"title",placeholder:"Title",value:j.title,component:lt}),Object(_e.jsx)(at.a,{placeholder:"Description",name:"description",rows:3,value:j.description,component:Ht}),Object(_e.jsx)(at.a,{component:mn,options:pn,name:"category",placeholder:"Category",value:j.category}),Object(_e.jsxs)(ct.a.Group,{widths:"equal",children:[Object(_e.jsx)(at.a,{component:gn,name:"date",date:!0,placeholder:"Date",value:j.date}),Object(_e.jsx)(at.a,{component:gn,name:"time",time:!0,placeholder:"Time",value:j.time})]}),Object(_e.jsx)(at.a,{component:lt,name:"city",placeholder:"City",value:j.city}),Object(_e.jsx)(at.a,{component:lt,name:"venue",placeholder:"Venue",value:j.venue}),Object(_e.jsx)(u.a,{loading:o,disabled:f||i||r,floated:"right",positive:!0,type:"submit",content:"Submit"}),Object(_e.jsx)(u.a,{onClick:j.id?function(){return n.push("/activities/".concat(j.id))}:function(){return n.push("/activities")},disabled:f,floated:"right",type:"button",content:"Cancel"})]})}})})})})})),wn=n(630),Cn=n(629),kn=Object(c.a)((function(){var e=Object(i.useContext)($e).activityStore,t=e.createHubConnection,n=e.stopHubConnection,r=e.activity,a=e.addComment;return Object(i.useEffect)((function(){return t(r.id),function(){n()}}),[t,n,r]),Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsx)(tt.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"},children:Object(_e.jsx)(nt.a,{children:"Chat about this event"})}),Object(_e.jsx)(tt.a,{attached:!0,children:Object(_e.jsxs)(wn.a.Group,{children:[r&&r.comments&&r.comments.map((function(e){return Object(_e.jsxs)(wn.a,{children:[Object(_e.jsx)(wn.a.Avatar,{src:e.image||"/assets/user.png"}),Object(_e.jsxs)(wn.a.Content,{children:[Object(_e.jsx)(wn.a.Author,{as:o.a,to:"/profiles/".concat(e.username),children:e.displayName}),Object(_e.jsx)(wn.a.Metadata,{children:Object(_e.jsx)("div",{children:Object(Cn.a)(new Date(e.createdAt),new Date)})}),Object(_e.jsx)(wn.a.Text,{children:e.body})]})]},e.id)})),Object(_e.jsx)(at.b,{onSubmit:a,render:function(e){var t=e.handleSubmit,n=e.submitting,i=e.form;return Object(_e.jsxs)(ct.a,{onSubmit:function(){return t().then((function(){return i.reset()}))},children:[Object(_e.jsx)(at.a,{name:"body",component:Ht,rows:2,placeholder:"Add Your Comment"}),Object(_e.jsx)(u.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:n})]})}})]})})]})})),Sn={filter:"brightness(30%)"},Pn={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},An=Object(c.a)((function(e){var t=e.activity,n=Object(i.useContext)($e).activityStore,r=n.attendActivity,a=n.cancelAttendance,c=n.loading,s=t.attendees.filter((function(e){return e.isHost}))[0];return Object(_e.jsx)("div",{children:Object(_e.jsxs)(tt.a.Group,{children:[Object(_e.jsxs)(tt.a,{basic:!0,attached:"top",style:{padding:"0"},children:[Object(_e.jsx)(b.a,{src:"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:Sn}),Object(_e.jsx)(tt.a,{basic:!0,style:Pn,children:Object(_e.jsx)(wt.a.Group,{children:Object(_e.jsx)(wt.a,{children:Object(_e.jsxs)(wt.a.Content,{children:[Object(_e.jsx)(nt.a,{size:"huge",content:t.title,style:{color:"white"}}),Object(_e.jsx)("p",{children:Object(Yt.a)(t.date,"eeee do MMMM")}),Object(_e.jsxs)("p",{children:["Hosted by"," ",Object(_e.jsx)(o.a,{to:"/profile/".concat(s.username),children:Object(_e.jsx)("strong",{children:s.displayName})})]})]})})})})]}),Object(_e.jsx)(tt.a,{clearing:!0,attached:"bottom",children:t.isHost?Object(_e.jsx)(u.a,{as:o.a,to:"/manage/".concat(t.id),color:"orange",floated:"right",children:"Manage Event"}):t.isGoing?Object(_e.jsx)(u.a,{loading:c,onClick:a,children:"Cancel Attendance"}):Object(_e.jsx)(u.a,{loading:c,onClick:r,color:"teal",children:"Join Activity"})})]})})})),zn=Object(c.a)((function(e){var t=e.activity;return Object(_e.jsx)("div",{children:Object(_e.jsxs)(tt.a.Group,{children:[Object(_e.jsx)(tt.a,{attached:"top",children:Object(_e.jsxs)(yt.a,{children:[Object(_e.jsx)(yt.a.Column,{width:1,children:Object(_e.jsx)(pt.a,{size:"large",color:"teal",name:"info"})}),Object(_e.jsx)(yt.a.Column,{width:15,children:Object(_e.jsx)("p",{children:t.description})})]})}),Object(_e.jsx)(tt.a,{attached:!0,children:Object(_e.jsxs)(yt.a,{verticalAlign:"middle",children:[Object(_e.jsx)(yt.a.Column,{width:1,children:Object(_e.jsx)(pt.a,{name:"calendar",size:"large",color:"teal"})}),Object(_e.jsx)(yt.a.Column,{width:15,children:Object(_e.jsxs)("span",{children:[Object(Yt.a)(t.date,"eeee do MMMM")," at ",Object(Yt.a)(t.date,"h: mm a")]})})]})}),Object(_e.jsx)(tt.a,{attached:!0,children:Object(_e.jsxs)(yt.a,{verticalAlign:"middle",children:[Object(_e.jsx)(yt.a.Column,{width:1,children:Object(_e.jsx)(pt.a,{name:"marker",size:"large",color:"teal"})}),Object(_e.jsx)(yt.a.Column,{width:11,children:Object(_e.jsxs)("span",{children:[t.venue,", ",t.city]})})]})})]})})})),Tn=Object(c.a)((function(e){var t=e.attendees;return Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsxs)(tt.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal",children:[t.length," ",1===t.length?"Person":"People"," Going"]}),Object(_e.jsx)(tt.a,{attached:!0,children:Object(_e.jsx)(en.a,{relaxed:!0,divided:!0,children:t.map((function(e){return Object(_e.jsxs)(wt.a,{style:{position:"relative"},children:[e.isHost&&Object(_e.jsx)(st.a,{style:{position:"absolute"},color:"orange",ribbon:"right",children:"Host"}),Object(_e.jsx)(b.a,{size:"tiny",src:e.image||"/assets/user.png"}),Object(_e.jsxs)(wt.a.Content,{verticalAlign:"middle",children:[Object(_e.jsx)(wt.a.Header,{as:"h3",children:Object(_e.jsx)(o.a,{to:"/profile/".concat(e.username),children:e.displayName})}),e.following&&Object(_e.jsx)(wt.a.Extra,{style:{color:"orange"},children:"Following"})]})]},e.username)}))})})]})})),Rn=Object(c.a)((function(e){var t=e.match,n=(e.history,Object(i.useContext)($e).activityStore),r=n.activity,a=n.loadActivity,c=n.loadingInitial;return Object(i.useEffect)((function(){a(t.params.id)}),[a,t.params.id]),c||!r?Object(_e.jsx)($t,{content:"Loading Activity..."}):r?Object(_e.jsxs)(yt.a,{children:[Object(_e.jsxs)(yt.a.Column,{width:10,children:[Object(_e.jsx)(An,{activity:r}),Object(_e.jsx)(zn,{activity:r}),Object(_e.jsx)(kn,{})]}),Object(_e.jsx)(yt.a.Column,{width:6,children:Object(_e.jsx)(Tn,{attendees:r.attendees})})]}):Object(_e.jsx)("h2",{children:"Activity Not Found"})})),In=function(){return Object(_e.jsxs)(tt.a,{placeholder:!0,children:[Object(_e.jsxs)(nt.a,{icon:!0,children:[Object(_e.jsx)(pt.a,{name:"search"}),"Oops - we've looked everywhere but couldn't find this."]}),Object(_e.jsx)(tt.a.Inline,{children:Object(_e.jsx)(u.a,{as:o.a,to:"/activities",primary:!0,children:"Return to Activities page"})})]})},Fn=n(33),Mn=(n(311),n(633)),Ln=Object(c.a)((function(){var e=Object(i.useContext)($e).modalStore,t=e.modal,n=t.open,r=t.body,a=e.closeModal;return Object(_e.jsx)(Mn.a,{open:n,onClose:a,size:"mini",children:Object(_e.jsx)(Mn.a.Content,{children:r})})})),Dn=function(e){var t=e.component,n=Object(hn.a)(e,["component"]),r=Object(i.useContext)($e).userStore.isLoggedIn;return Object(_e.jsx)(Fn.b,Object(Xe.a)(Object(Xe.a)({},n),{},{render:function(e){return r?Object(_e.jsx)(t,Object(Xe.a)({},e)):Object(_e.jsx)(Fn.a,{to:"/"})}}))},En=n(203),Nn=n.n(En),Hn=function(e){var t=e.location,n=Nn.a.parse(t.search).email;return Object(_e.jsxs)(tt.a,{placeholder:!0,children:[Object(_e.jsxs)(nt.a,{icon:!0,children:[Object(_e.jsx)(pt.a,{name:"check"}),"Successfully registered!"]}),Object(_e.jsx)(tt.a.Inline,{children:Object(_e.jsxs)("div",{className:"center",children:[Object(_e.jsx)("p",{children:"Please check your email (Including your junk folder) for the verification email"}),n&&Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)("p",{children:"Didn't receive the email? Please click below button to resend."}),Object(_e.jsx)(u.a,{onClick:function(){Ue.resendVerifyEmailConfirm(n).then((function(){y.b.success("Verification email resent. Please check your email.")})).catch((function(e){return console.log(e)}))},primary:!0,content:"Resend Email",size:"huge"})]})]})})]})},Gn=function(e){var t=e.location,n=Object(i.useContext)($e),r="Verifying",a="Failed",c="Success",o=Object(i.useState)(r),s=Object(At.a)(o,2),l=s[0],b=s[1],j=n.modalStore.openModal,d=Nn.a.parse(t.search),h=d.token,p=d.email;Object(i.useEffect)((function(){Ue.verifyEmail(h,p).then((function(){b(c)})).catch((function(){b(a)}))}),[a,c,h,p]);var f=function(){Ue.resendVerifyEmailConfirm(p).then((function(){y.b.success("Verification email resent. Please check your email.")})).catch((function(e){return console.log(e)}))};return Object(_e.jsxs)(tt.a,{placeholder:!0,children:[Object(_e.jsxs)(nt.a,{icon:!0,children:[Object(_e.jsx)(pt.a,{name:"envelope"}),"Email Verification"]}),Object(_e.jsx)(tt.a.Inline,{children:function(){switch(l){case r:return Object(_e.jsx)("p",{children:" Verifying..."});case a:return Object(_e.jsxs)("div",{className:"center",children:[Object(_e.jsx)("p",{children:"Verification failed. You can try resending the verification email."}),Object(_e.jsx)(u.a,{onClick:f,primary:!0,size:"huge",content:"Resend Email"})]});case c:return Object(_e.jsxs)("div",{className:"center",children:[Object(_e.jsx)("p",{children:"Email has been verified. You can login"}),Object(_e.jsx)(u.a,{onClick:function(){return j(Object(_e.jsx)(mt,{}))},primary:!0,size:"large",content:"Login"})]})}}()})]})},Un=Object(Fn.h)(Object(c.a)((function(e){var t=e.location,n=Object(i.useContext)($e),r=n.commonStore,a=r.setAppLoaded,c=r.token,o=r.appLoaded,s=n.userStore.getUser;return Object(i.useEffect)((function(){c&&!o?s().finally((function(){return a()})):a()}),[s,a,c,o]),o?Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsx)(Ln,{}),Object(_e.jsx)(y.a,{position:"bottom-right"}),Object(_e.jsx)(Fn.b,{exact:!0,path:"/",component:xt}),Object(_e.jsx)(Fn.b,{path:"/(.+)",render:function(){return Object(_e.jsxs)(i.Fragment,{children:[Object(_e.jsx)(et,{}),Object(_e.jsx)(l.a,{style:{marginTop:"7em"},children:Object(_e.jsxs)(Fn.d,{children:[Object(_e.jsx)(Dn,{exact:!0,path:"/activities",component:dn}),Object(_e.jsx)(Dn,{path:"/activities/:id",component:Rn}),Object(_e.jsx)(Dn,{path:["/createActivity","/manage/:id"],component:yn},t.key),Object(_e.jsx)(Dn,{path:"/profile/:username",component:_t}),Object(_e.jsx)(Fn.b,{path:"/user/registerSuccess",component:Hn}),Object(_e.jsx)(Fn.b,{path:"/user/verifyEmail",component:Gn}),Object(_e.jsx)(Fn.b,{component:In})]})})]})}})]}):Object(_e.jsx)($t,{content:"Loading App..."})}))),qn=function(){var e=Object(Fn.g)().pathname;return Object(i.useEffect)((function(){window.scrollTo(0,0)}),[e]),null},Vn=n(54),Bn=n(332),Yn=n.n(Bn),Jn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,646)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};n(603),n(604),n(605);Yn()();var Wn=Object(Vn.a)();a.a.render(Object(_e.jsxs)(Fn.c,{history:Wn,children:[Object(_e.jsx)(qn,{}),Object(_e.jsx)(Un,{})]}),document.getElementById("root")),Jn()}},[[606,1,2]]]);
//# sourceMappingURL=main.c0ed5460.chunk.js.map